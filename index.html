<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ByteSavior - Rescue Performance. Reduce Exposure.</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <!-- Diagnostics/performance charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    :root { --blue: #00bfff; --bg: #121212; --panel: #1e1e1e; --panel-dark: #0f172a; --text: #e5e7eb; --muted: #9ca3af; --green: #4ade80; --orange: #fb923c; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; background: var(--bg); color: var(--text); font-family: 'Segoe UI', system-ui, sans-serif; overflow-x: hidden; overflow-y: auto; }

    /* ===== Landing / Hero (from original index) ===== */
    .landing-container { min-height: 100vh; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 80px 20px 120px; position: relative; }
    .hero-section { text-align: center; z-index: 1; max-width: 800px; animation: fadeIn 1s ease; display: flex; flex-direction: column; align-items: center; width: 100%; }
    @keyframes fadeIn { from{opacity:0; transform: translateY(20px);} to{opacity:1; transform: translateY(0);} }
    .logo-container { margin-bottom: 30px; animation: fadeIn 1s ease 0.2s backwards; display: flex; justify-content: center; width: 100%; }
    .logo-img { width: 120px; height: 120px; object-fit: contain; filter: drop-shadow(0 8px 24px rgba(0, 191, 255, 0.3)); transition: transform 0.3s ease; }
    .logo-img:hover { transform: scale(1.05) rotate(5deg); }
    .brand-title { font-size: 3.5rem; font-weight: 700; color: var(--blue); margin-bottom: 16px; letter-spacing: 0.02em; text-shadow: 0 4px 20px rgba(0, 191, 255, 0.3); animation: fadeIn 1s ease 0.4s backwards; width: 100%; text-align: center; }
    .tagline { font-size: 1.3rem; color: var(--muted); margin-bottom: 60px; font-weight: 400; animation: fadeIn 1s ease 0.6s backwards; width: 100%; text-align: center; }

    /* Global Search */
    .global-search-container { width: 100%; max-width: 700px; margin-bottom: 50px; animation: fadeIn 1s ease 0.7s backwards; }
    .search-wrapper { background: var(--panel); border: 2px solid transparent; border-radius: 12px; padding: 12px 16px; transition: all 0.3s ease; }
    .search-wrapper:focus-within { border-color: var(--blue); box-shadow: 0 8px 24px rgba(0, 191, 255, 0.2); }
    .search-box-global { position: relative; }
    .search-input-global { width: 100%; padding: 12px 16px 12px 44px; background: var(--bg); border: 1px solid #333; border-radius: 8px; color: var(--text); font-size: 1rem; transition: border-color 0.2s; }
    .search-input-global:focus { outline: none; border-color: var(--blue); }
    .search-icon-global { position: absolute; left: 14px; top: 50%; transform: translateY(-50%); color: var(--muted); font-size: 1.1rem; }
    .search-results-global { margin-top: 16px; max-height: 400px; overflow-y: auto; display: none; }
    .search-results-global.active { display: block; }
    .search-result-item { background: var(--bg); border: 1px solid #333; border-radius: 8px; padding: 14px 16px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s; }
    .search-result-item:hover { border-color: var(--blue); transform: translateX(4px); }
    .result-category { font-size: 0.75rem; color: var(--blue); font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; }
    .result-title { font-size: 1rem; font-weight: 600; color: var(--text); margin-bottom: 4px; }
    .result-preview { font-size: 0.85rem; color: var(--muted); line-height: 1.4; }
    .result-highlight { background: rgba(0, 191, 255, 0.3); padding: 2px 4px; border-radius: 2px; }
    .no-results-global { text-align: center; padding: 30px 20px; color: var(--muted); font-size: 0.9rem; }

    /* Main Navigation Buttons */
    .nav-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; width: 100%; max-width: 800px; margin-bottom: 60px; animation: fadeIn 1s ease 0.8s backwards; }
    .nav-card { background: var(--panel); border: 2px solid transparent; border-radius: 12px; padding: 28px 20px; text-decoration: none; color: var(--text); transition: all 0.3s ease; position: relative; overflow: hidden; cursor: pointer; text-align: center; }
    .nav-card::before { content: ''; position: absolute; inset: 0; background: linear-gradient(135deg, transparent 0%, rgba(0, 191, 255, 0.05) 100%); opacity: 0; transition: opacity 0.3s ease; }
    .nav-card:hover { transform: translateY(-8px); border-color: var(--blue); box-shadow: 0 12px 40px rgba(0, 191, 255, 0.2); }
    .nav-card:hover::before { opacity: 1; }
    .nav-card-icon { font-size: 2.5rem; margin-bottom: 12px; display: block; transition: transform 0.3s ease; }
    .nav-card-icon i { display: inline-block; }
    .nav-card:hover .nav-card-icon { transform: scale(1.1); }
    .nav-card-title { font-size: 1.1rem; font-weight: 600; color: var(--text); }
    .nav-card-desc { display: none; }

    /* Diagnostic Tools Section (matching optimization.html style) */
    .tools-section { display: flex; gap: 16px; justify-content: center; animation: fadeIn 1s ease 1s backwards; }
    .tool-btn { background: linear-gradient(135deg, var(--blue) 0%, #0088cc 100%); color: white; border: none; border-radius: 50%; width: 56px; height: 56px; font-size: 24px; cursor: pointer; box-shadow: 0 4px 12px rgba(0, 191, 255, 0.4); transition: transform 0.2s, box-shadow 0.2s; display: flex; align-items: center; justify-content: center; text-decoration: none; position: relative; }
    .tool-btn i { font-size: inherit; }
    .tool-btn:hover { transform: scale(1.1); box-shadow: 0 6px 20px rgba(0, 191, 255, 0.6); }
    .tool-btn:active { transform: scale(0.95); }
    .tools-label { font-size: 0.85rem; color: var(--muted); text-align: center; margin-top: 12px; font-weight: 500; }
    @media (max-width: 600px) { .tool-btn { width: 48px; height: 48px; font-size: 20px; } }

    /* Footer */
    .landing-footer { margin-top: 60px; display: flex; gap: 24px; animation: fadeIn 1s ease 1.2s backwards; }
    .footer-link { color: var(--muted); text-decoration: none; font-size: 0.9rem; transition: color 0.2s ease; display: flex; align-items: center; gap: 8px; }
    .footer-link:hover { color: var(--blue); }

    /* Mobile Responsive Tweaks */
    @media (max-width: 768px) {
      .brand-title { font-size: 2.5rem; }
      .tagline { font-size: 1.1rem; margin-bottom: 40px; }
      .nav-grid { grid-template-columns: repeat(2, 1fr); gap: 16px; max-width: 400px; }
      .nav-card { padding: 24px 16px; }
      .nav-card-icon { font-size: 2rem; }
      .nav-card-title { font-size: 1rem; }
      .tools-section { gap: 12px; }
      .landing-footer { flex-direction: column; gap: 12px; margin-top: 40px; }
    }
    @media (max-width: 480px) {
      .brand-title { font-size: 2rem; }
      .logo-img { width: 100px; height: 100px; }
      .tagline { font-size: 1rem; }
      .nav-grid { grid-template-columns: 1fr; }
    }

    /* ===== Diagnostics & Performance (copied from optimization) ===== */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 2000; padding: 20px; }
    .modal-overlay.active { display: flex; }
    .modal-content { background: var(--panel); border: 2px solid var(--blue); border-radius: 12px; max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto; box-shadow: 0 8px 32px rgba(0,191,255,0.3); animation: slideIn 0.3s ease-out; }
    @keyframes slideIn { from{opacity:0; transform: translateY(-30px);} to{opacity:1; transform: translateY(0);} }
    .modal-header { background: var(--panel-dark); padding: 20px 24px; border-bottom: 2px solid var(--blue); display: flex; justify-content: space-between; align-items: center; }
    .modal-header h2 { margin: 0; color: var(--blue); font-size: 1.5rem; display: flex; align-items: center; gap: 10px; }
    .close-btn { background: none; border: none; color: var(--text); font-size: 28px; cursor: pointer; padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 4px; transition: background 0.2s, color 0.2s; }
    .close-btn:hover { background: rgba(255,255,255,0.1); color: var(--blue); }
    .modal-body { padding: 24px; }
    .diagnostic-section { margin-bottom: 24px; }
    .diagnostic-section h3 { color: var(--blue); font-size: 1.1rem; margin: 0 0 12px 0; display: flex; align-items: center; gap: 8px; }
    .info-grid { display: grid; gap: 10px; }
    .info-item { background: #1f2933; padding: 12px 16px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; border-left: 3px solid var(--blue); }
    .info-label { font-weight: 600; color: var(--text); }
    .info-value { color: var(--muted); font-family: monospace; font-size: 0.9rem; }
    .status-badge { display: inline-block; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600; }
    .status-good { background: rgba(34,197,94,0.2); color: #4ade80; }
    .status-warning { background: rgba(251,191,36,0.2); color: #fbbf24; }
    .status-info { background: rgba(59,130,246,0.2); color: #60a5fa; }
    .refresh-btn { width: 100%; padding: 12px; background: var(--blue); color: white; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background 0.2s, transform 0.1s; margin-top: 12px; }
    .refresh-btn:hover { background: #0099e6; transform: translateY(-1px); }
    .refresh-btn:active { transform: translateY(0); }
    .loading { text-align: center; color: var(--muted); padding: 20px; }
    .diagnostic-note { background: rgba(0,191,255,0.08); border: 1px solid rgba(0,191,255,0.35); color: var(--text); border-radius: 6px; padding: 10px 12px; margin: 0 0 16px 0; font-size: 0.85rem; display: flex; align-items: center; gap: 8px; }
    .diagnostic-note i { color: var(--blue); }

    /* Health score & metrics (from optimization) */
    .health-score-container { background: var(--panel); border: 1px solid #333; border-radius: 8px; padding: 20px; margin-bottom: 20px; border-left: 4px solid var(--blue); }
    .health-score-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .health-score-header h3 { margin: 0; color: var(--blue); font-size: 1.2rem; }
    .score-display { text-align: center; margin: 20px 0; }
    .score-circle { position: relative; width: 150px; height: 150px; margin: 0 auto 20px; }
    .score-circle svg { transform: rotate(-90deg); }
    .score-circle-bg { fill: none; stroke: #333; stroke-width: 12; }
    .score-circle-progress { fill: none; stroke: var(--blue); stroke-width: 12; stroke-linecap: round; transition: stroke-dashoffset 1s ease; }
    .score-circle-progress.excellent { stroke: #4ade80; }
    .score-circle-progress.good { stroke: var(--blue); }
    .score-circle-progress.fair { stroke: #fbbf24; }
    .score-circle-progress.poor { stroke: #ef4444; }
    .score-value { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 2.5rem; font-weight: 700; color: var(--text); }
    .score-label { font-size: 0.9rem; color: var(--muted); margin-top: 8px; }
    .health-metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 16px; }
    .metric-card { background: var(--bg); border: 1px solid #333; border-radius: 6px; padding: 12px; }
    .metric-card h5 { margin: 0 0 8px 0; color: var(--muted); font-size: 0.85rem; font-weight: 600; }
    .metric-value { font-size: 1.1rem; font-weight: 700; color: var(--text); }
    .metric-bar { height: 6px; background: #333; border-radius: 3px; margin-top: 8px; overflow: hidden; }
    .metric-bar-fill { height: 100%; background: var(--blue); border-radius: 3px; transition: width 0.5s ease; }
    .metric-bar-fill.excellent { background: #4ade80; }
    .metric-bar-fill.good { background: var(--blue); }
    .metric-bar-fill.fair { background: #fbbf24; }
    .metric-bar-fill.poor { background: #ef4444; }
    .health-recommendations { background: rgba(0,191,255,0.05); border: 1px solid rgba(0,191,255,0.2); border-radius: 6px; padding: 16px; margin-top: 20px; }
    .health-recommendations h4 { margin: 0 0 12px 0; color: var(--blue); font-size: 1rem; }
    .recommendation-item { background: var(--bg); border-left: 3px solid var(--blue); padding: 10px 12px; margin-bottom: 10px; border-radius: 4px; font-size: 0.9rem; line-height: 1.5; }
    .recommendation-item:last-child { margin-bottom: 0; }
    .recommendation-item strong { color: var(--blue); }

    /* Performance monitor (from optimization) */
    .perf-test-container { background: var(--panel); border: 1px solid #333; border-radius: 8px; padding: 20px; margin-bottom: 20px; border-left: 4px solid #4ade80; }
    .perf-test-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .perf-test-header h3 { margin: 0; color: #4ade80; font-size: 1.2rem; }
    .perf-test-btn { padding: 8px 16px; background: #4ade80; color: #121212; border: none; border-radius: 6px; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.2s; }
    .perf-test-btn:hover { background: #22c55e; transform: translateY(-1px); }
    .perf-results { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-top: 16px; }
    .perf-result-card { background: var(--bg); border: 1px solid #333; border-radius: 6px; padding: 16px; }
    .perf-result-card h4 { margin: 0 0 12px 0; color: var(--text); font-size: 1rem; }
    .perf-comparison { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .perf-label { font-size: 0.85rem; color: var(--muted); }
    .perf-value { font-size: 1.1rem; font-weight: 700; color: var(--text); }
    .perf-improvement { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: 600; margin-top: 8px; }
    .perf-improvement.positive { background: rgba(74,222,128,0.2); color: #4ade80; }
    .perf-improvement.negative { background: rgba(239,68,68,0.2); color: #ef4444; }
    .perf-chart-container { margin-top: 20px; background: var(--bg); border: 1px solid #333; border-radius: 6px; padding: 16px; }
    .perf-chart-container canvas { max-height: 300px; }
    .perf-status { text-align: center; padding: 20px; color: var(--muted); font-size: 0.9rem; }

    /* Give Suggestions modal (from original index) */
    .submit-modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.85); z-index: 2000; overflow-y: auto; padding: 20px; }
    .submit-modal-overlay.active { display: flex; align-items: flex-start; justify-content: center; }
    .submit-modal-content { background: var(--panel); border: 1px solid #333; border-radius: 8px; max-width: 600px; width: 100%; margin: 40px auto; animation: slideIn 0.3s ease; }
    .submit-modal-header { padding: 20px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
    .submit-modal-header h2 { margin: 0; color: var(--blue); font-size: 1.3rem; }
    .submit-modal-body { padding: 24px; max-height: 70vh; overflow-y: auto; }
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; margin-bottom: 8px; color: var(--text); font-weight: 600; font-size: 0.9rem; }
    .form-group label .required { color: #ef4444; }
    .form-input, .form-textarea, .form-select { width: 100%; padding: 10px 12px; background: var(--bg); border: 1px solid #333; border-radius: 6px; color: var(--text); font-size: 0.9rem; font-family: inherit; transition: border-color 0.2s; }
    .form-input:focus, .form-textarea:focus, .form-select:focus { outline: none; border-color: var(--blue); box-shadow: 0 0 0 2px rgba(0, 191, 255, 0.2); }
    .form-textarea { min-height: 100px; resize: vertical; }
    .form-helper { font-size: 0.8rem; color: var(--muted); margin-top: 4px; }
    .form-error { font-size: 0.8rem; color: #ef4444; margin-top: 4px; display: none; }
    .form-error.active { display: block; }
    .submit-modal-footer { padding: 16px 24px; border-top: 1px solid #333; display: flex; justify-content: flex-end; gap: 12px; }
    .btn-secondary { padding: 10px 20px; background: transparent; border: 1px solid #333; border-radius: 6px; color: var(--text); cursor: pointer; font-size: 0.9rem; transition: all 0.2s; }
    .btn-secondary:hover { background: var(--bg); border-color: var(--blue); }
    .btn-primary { padding: 10px 20px; background: var(--blue); border: none; border-radius: 6px; color: white; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: all 0.2s; }
    .btn-primary:hover { background: #0099e6; }
    .btn-primary:disabled { background: #333; color: var(--muted); cursor: not-allowed; }
    .success-message { text-align: center; padding: 40px 20px; }
    .success-message .icon { font-size: 4rem; margin-bottom: 16px; }
    .success-message h3 { margin: 0 0 12px 0; color: var(--blue); }
    .success-message p { margin: 0; color: var(--muted); line-height: 1.6; }

    @media (max-height: 700px) { .landing-container { padding: 60px 20px 80px; } }
  
    /* ========================================
       BACKGROUND ANIMATION
       Triangles/Hexagons â€” Constant Linear Movement
       ======================================== */

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 0;
      background:
        radial-gradient(ellipse at 50% 0%, rgba(0, 191, 255, 0.15) 0%, transparent 50%),
        radial-gradient(ellipse at 50% 100%, rgba(0, 191, 255, 0.09) 0%, transparent 50%);
    }

    body::after {
      content: '';
      position: fixed;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      pointer-events: none;
      z-index: 0;
      background-image:
        repeating-linear-gradient(
          0deg,
          transparent,
          transparent 40px,
          rgba(0, 191, 255, 0.05) 40px,
          rgba(0, 191, 255, 0.05) 41px
        ),
        repeating-linear-gradient(
          60deg,
          transparent,
          transparent 80px,
          rgba(0, 191, 255, 0.04) 80px,
          rgba(0, 191, 255, 0.04) 81px
        ),
        repeating-linear-gradient(
          120deg,
          transparent,
          transparent 80px,
          rgba(0, 191, 255, 0.04) 80px,
          rgba(0, 191, 255, 0.04) 81px
        );
      animation: hexFlow 20s linear infinite;
    }

    @keyframes hexFlow {
      0%   { transform: translate(0, 0); }
      100% { transform: translate(80px, 80px); }
    }

  </style>
</head>
<body>
  <div class="landing-container">
    <div class="hero-section">
      <!-- Logo and Branding -->
      <div class="logo-container">
        <img src="fa28acf4-ac03-4411-a2d4-d1bd0ed4fe1b.png" alt="ByteSavior Logo" class="logo-img">
      </div>
      <h1 class="brand-title">ByteSavior</h1>
      <p class="tagline">Rescue performance. Reduce exposure.</p>

      <!-- Global Search -->
      <div class="global-search-container">
        <div class="search-wrapper">
          <div class="search-box-global">
            <i class="fas fa-search search-icon-global"></i>
            <input type="text" class="search-input-global" id="globalSearch" placeholder="Search across all sections..." />
          </div>
        </div>
        <div class="search-results-global" id="globalResults"></div>
      </div>

      <!-- Main Navigation Grid -->
      <div class="nav-grid">
        <a href="optimization.html" class="nav-card">
          <span class="nav-card-icon"><i class="fas fa-sliders-h"></i></span>
          <h2 class="nav-card-title">Optimization</h2>
        </a>
        <a href="anonymity.html" class="nav-card">
          <span class="nav-card-icon"><i class="fas fa-user-shield"></i></span>
          <h2 class="nav-card-title">Anonymity</h2>
        </a>
        <a href="extras.html" class="nav-card">
          <span class="nav-card-icon"><i class="fas fa-tools"></i></span>
          <h2 class="nav-card-title">Extras</h2>
        </a>
        <a href="opsec.html" class="nav-card">
          <span class="nav-card-icon"><i class="fas fa-shield-alt"></i></span>
          <h2 class="nav-card-title">OpSec</h2>
        </a>
      </div>

      <!-- Diagnostic Tools: rewired to run in-page -->
      <div class="tools-section">
        <a href="javascript:void(0)" class="tool-btn diagnostic" title="System Diagnostics" onclick="openDiagnostic()"><i class="fas fa-laptop"></i></a>
        <a href="javascript:void(0)" class="tool-btn performance" title="Performance Monitor" onclick="togglePerformanceMonitor()"><i class="fas fa-chart-bar"></i></a>
      </div>

    </div>

    <!-- Footer Links -->
    <div class="landing-footer">
      <a href="https://github.com/ByteSavior" class="footer-link" target="_blank">
        <i class="fab fa-github"></i> GitHub
      </a>
      <a href="https://www.instagram.com/byte_savior/" class="footer-link" target="_blank">
        <i class="fab fa-instagram"></i> Instagram
      </a>
      <a href="javascript:void(0)" class="footer-link" onclick="openSubmitTweakModal()">
        <i class="fas fa-plus-circle"></i> Give Suggestions
      </a>
    </div>
  </div>

  <!-- Give Suggestions Modal (unchanged) -->
  <div class="submit-modal-overlay" id="submitTweakModal" onclick="closeSubmitTweakModal()">
    <div class="submit-modal-content" onclick="event.stopPropagation()">
      <div class="submit-modal-header">
        <h2><i class="fas fa-lightbulb"></i> Give Suggestions</h2>
        <button class="close-btn" onclick="closeSubmitTweakModal()">Ã—</button>
      </div>
      <div class="submit-modal-body" id="submitModalBody">
        <form id="submitTweakForm">
          <div class="form-group">
            <label>Your Name <span class="required">*</span></label>
            <input type="text" class="form-input" id="tweakAuthor" required placeholder="e.g., John Doe">
            <div class="form-error" id="authorError">Please enter your name</div>
          </div>
          <div class="form-group">
            <label>Suggestion Title <span class="required">*</span></label>
            <input type="text" class="form-input" id="tweakTitle" required placeholder="e.g., Add dark mode toggle">
            <div class="form-error" id="titleError">Please enter a title</div>
          </div>
          <div class="form-group">
            <label>Category <span class="required">*</span></label>
            <select class="form-select" id="tweakCategory" required>
              <option value="">Select a category...</option>
              <option value="optimization">Optimization</option>
              <option value="anonymity">Anonymity</option>
              <option value="extras">Extras</option>
              <option value="opsec">OpSec</option>
              <option value="general">General Suggestion</option>
            </select>
            <div class="form-error" id="categoryError">Please select a category</div>
          </div>
          <div class="form-group">
            <label>Description <span class="required">*</span></label>
            <textarea class="form-textarea" id="tweakDescription" required placeholder="Describe your suggestion in detail..."></textarea>
            <div class="form-helper">Be as detailed as possible. Include any relevant information.</div>
            <div class="form-error" id="descriptionError">Please enter a description (minimum 50 characters)</div>
          </div>
          <div class="form-group">
            <label>Source/Reference (optional)</label>
            <input type="url" class="form-input" id="tweakSource" placeholder="https://example.com/article">
            <div class="form-helper">Link to article, video, or documentation</div>
          </div>
        </form>
      </div>
      <div class="submit-modal-footer">
        <button class="btn-secondary" onclick="closeSubmitTweakModal()">Cancel</button>
        <button class="btn-primary" onclick="submitTweak()">Submit Suggestion</button>
      </div>
    </div>
  </div>

  <!-- Diagnostics Modal (copied from optimization) -->
  <div class="modal-overlay" id="diagnosticModal" onclick="closeOnOutsideClick(event)">
    <div class="modal-content" onclick="event.stopPropagation()">
      <div class="modal-header">
        <h2><i class="fas fa-search"></i> System Diagnostics</h2>
        <button class="close-btn" onclick="closeDiagnostic()">Ã—</button>
      </div>
      <div class="modal-body" id="diagnosticContent">
        <div class="loading"><i class="fas fa-sync-alt"></i> Running diagnostics...</div>
      </div>
    </div>
  </div>

  <script>
    // ===== Toast-free minimal approach per request (no big changes) =====

    // ===== SUBMIT SUGGESTION SYSTEM (from original index) =====
    function openSubmitTweakModal() { const modal = document.getElementById('submitTweakModal'); modal.classList.add('active'); document.body.style.overflow = 'hidden'; }
    function closeSubmitTweakModal() { const modal = document.getElementById('submitTweakModal'); modal.classList.remove('active'); document.body.style.overflow = 'auto'; document.getElementById('submitTweakForm').reset(); document.querySelectorAll('.form-error').forEach(err => err.classList.remove('active')); }
    function validateTweakForm() { let isValid = true; const author = document.getElementById('tweakAuthor').value.trim(); if (author.length < 2) { document.getElementById('authorError').classList.add('active'); isValid = false; } else { document.getElementById('authorError').classList.remove('active'); } const title = document.getElementById('tweakTitle').value.trim(); if (title.length < 5) { document.getElementById('titleError').classList.add('active'); isValid = false; } else { document.getElementById('titleError').classList.remove('active'); } const category = document.getElementById('tweakCategory').value; if (!category) { document.getElementById('categoryError').classList.add('active'); isValid = false; } else { document.getElementById('categoryError').classList.remove('active'); } const description = document.getElementById('tweakDescription').value.trim(); if (description.length < 50) { document.getElementById('descriptionError').classList.add('active'); isValid = false; } else { document.getElementById('descriptionError').classList.remove('active'); } return isValid; }
    function submitTweak() { if (!validateTweakForm()) { return; } const author = document.getElementById('tweakAuthor').value.trim(); const title = document.getElementById('tweakTitle').value.trim(); const category = document.getElementById('tweakCategory').value; const description = document.getElementById('tweakDescription').value.trim(); const source = document.getElementById('tweakSource').value.trim(); const categoryNames = { optimization: 'Optimization', anonymity: 'Anonymity', extras: 'Extras', opsec: 'OpSec', general: 'General Suggestion' }; const issueTitle = `[Suggestion] ${title}`; const issueBody = `\n## <i class="fas fa-lightbulb"></i> New Suggestion\n**Submitted by:** ${author}\n**Category:** ${categoryNames[category]}\n### Description\n${description}\n${source ? `### Source/Reference\\n${source}` : ''}\n---\n*This suggestion was submitted via the ByteSavior website.*`.trim(); const githubUrl = `https://github.com/ByteSavior/ByteSavior/issues/new?title=${encodeURIComponent(issueTitle)}&body=${encodeURIComponent(issueBody)}&labels=suggestion`; const modalBody = document.getElementById('submitModalBody'); modalBody.innerHTML = `<div class="success-message"><div class="icon"><i class="fas fa-check-circle"></i></div><h3>Ready to Submit!</h3><p>Click the button below to open GitHub and submit your suggestion. You'll need a GitHub account (it's free!).</p><p style="margin-top: 16px; font-size: 0.9rem;">Thanks for contributing!</p></div>`; const footer = document.querySelector('.submit-modal-footer'); footer.innerHTML = `<button class="btn-secondary" onclick="closeSubmitTweakModal()">Close</button><button class="btn-primary" onclick="window.open('${githubUrl}', '_blank')"><i class="fab fa-github"></i> Open GitHub Issue</button>`; }

    // ===== GLOBAL SEARCH SYSTEM (from original index) =====
    const globalSearchInput = document.getElementById('globalSearch');
    const globalResults = document.getElementById('globalResults');
    const searchIndex = [
      { category: 'Optimization', title: 'Disable Windows Telemetry', preview: 'Disable data collection and improve privacy by turning off Windows telemetry services.', page: 'optimization.html#privacy' },
      { category: 'Optimization', title: 'Enable Hardware-Accelerated GPU Scheduling', preview: 'Reduce input lag and improve gaming performance with GPU scheduling.', page: 'optimization.html#gpu' },
      { category: 'Optimization', title: 'Disable Unnecessary Startup Programs', preview: 'Speed up boot time by disabling programs that auto-start with Windows.', page: 'optimization.html#maintenance' },
      { category: 'Optimization', title: 'Optimize Power Settings', preview: 'Set Windows to High Performance mode for maximum speed.', page: 'optimization.html#performance' },
      { category: 'Optimization', title: 'Clean Temp Files', preview: 'Remove temporary files to free up disk space and improve performance.', page: 'optimization.html#maintenance' },
      { category: 'Optimization', title: 'Disable Windows Search Indexing', preview: 'Stop Windows Search from constantly indexing files in the background.', page: 'optimization.html#maintenance' },
      { category: 'Optimization', title: 'Enable Game Mode', preview: 'Windows Game Mode optimizes system resources for better gaming performance.', page: 'optimization.html#performance' },
      { category: 'Optimization', title: 'Adjust Virtual Memory', preview: 'Optimize pagefile settings for better system responsiveness.', page: 'optimization.html#performance' },
      { category: 'Optimization', title: 'Disable Visual Effects', preview: 'Turn off animations and transparency for faster performance.', page: 'optimization.html#performance' },
      { category: 'Optimization', title: 'Update GPU Drivers', preview: 'Keep graphics drivers up to date for best performance and stability.', page: 'optimization.html#gpu' },
      { category: 'Anonymity', title: 'Tor Browser', preview: 'Browse the web anonymously with the most secure browser available. Recommended for maximum privacy.', page: 'anonymity.html' },
      { category: 'Anonymity', title: 'Brave Browser', preview: 'Privacy-focused browser with built-in ad blocking and tracker protection.', page: 'anonymity.html' },
      { category: 'Anonymity', title: 'Proton Mail', preview: 'End-to-end encrypted email service based in Switzerland. Recommended for private communications.', page: 'anonymity.html' },
      { category: 'Anonymity', title: 'Proton VPN', preview: 'Secure VPN service with no-logs policy and strong encryption.', page: 'anonymity.html' },
      { category: 'Anonymity', title: 'Mullvad VPN', preview: 'Anonymous VPN that accepts cryptocurrency and requires no personal information.', page: 'anonymity.html' },
      { category: 'Anonymity', title: 'LibreWolf', preview: 'Privacy-hardened Firefox fork with enhanced security settings.', page: 'anonymity.html' },
      { category: 'Extras', title: 'Everything File Search', preview: 'Instantly search for files on your PC - much faster than Windows Search.', page: 'extras.html' },
      { category: 'Extras', title: 'MSI Afterburner', preview: 'Monitor GPU temperature, usage, and overclock your graphics card.', page: 'extras.html' },
      { category: 'Extras', title: 'VirusTotal', preview: 'Scan files and URLs with multiple antivirus engines to check for malware.', page: 'extras.html' },
      { category: 'Extras', title: 'WizTree', preview: 'Find what files and folders are taking up space on your drive.', page: 'extras.html' },
      { category: 'Extras', title: 'Temp-Mail', preview: 'Generate temporary disposable email addresses for one-time use.', page: 'extras.html' },
      { category: 'Extras', title: 'Have I Been Pwned', preview: 'Check if your email or password has been compromised in a data breach.', page: 'extras.html' },
      { category: 'Extras', title: 'FitGirl Repacks', preview: 'Highly compressed game repacks for downloading PC games.', page: 'extras.html' },
      { category: 'OpSec', title: 'Tails OS', preview: 'Live operating system that routes all traffic through Tor and leaves no trace.', page: 'opsec.html' },
      { category: 'OpSec', title: 'Whonix', preview: 'Operating system designed for advanced anonymity and privacy using Tor.', page: 'opsec.html' },
      { category: 'OpSec', title: 'QubesOS', preview: 'Security-focused OS that isolates programs in virtual machines.', page: 'opsec.html' },
      { category: 'OpSec', title: 'VeraCrypt', preview: 'Free and open-source disk encryption software for protecting sensitive data.', page: 'opsec.html' },
      { category: 'OpSec', title: 'Compartmentalization', preview: 'Separate different online identities and activities for better security.', page: 'opsec.html' },
      { category: 'OpSec', title: 'MAC Address Randomization', preview: 'Change your device MAC address to avoid network tracking.', page: 'opsec.html' },
      { category: 'OpSec', title: 'Burner Emails', preview: 'Use temporary email addresses to protect your real identity.', page: 'opsec.html' },
      { category: 'OpSec', title: 'Cryptocurrency Privacy', preview: 'Use privacy coins and mixers to anonymize crypto transactions.', page: 'opsec.html' }
    ];
    if (globalSearchInput) {
      globalSearchInput.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase().trim();
        if (query.length < 2) { globalResults.classList.remove('active'); return; }
        const results = searchIndex.filter(item => item.title.toLowerCase().includes(query) || item.preview.toLowerCase().includes(query) || item.category.toLowerCase().includes(query));
        displayGlobalResults(results, query);
      });
      document.addEventListener('click', (e) => { if (!e.target.closest('.global-search-container')) { globalResults.classList.remove('active'); } });
    }
    function displayGlobalResults(results, query){ if (results.length === 0) { globalResults.innerHTML = '<div class="no-results-global">No results found. Try different keywords.</div>'; globalResults.classList.add('active'); return; } const html = results.map(r => { const titleHighlighted = highlightMatch(r.title, query); const previewHighlighted = highlightMatch(r.preview, query); return `<div class="search-result-item" onclick="window.location.href='${r.page}'"><div class="result-category">${r.category}</div><div class="result-title">${titleHighlighted}</div><div class="result-preview">${previewHighlighted}</div></div>`; }).join(''); globalResults.innerHTML = html; globalResults.classList.add('active'); }
    function highlightMatch(text, query){ const regex = new RegExp(`(${escapeRegex(query)})`, 'gi'); return text.replace(regex, '<span class="result-highlight">$1</span>'); }
    function escapeRegex(string){ return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

    // ===== DIAGNOSTIC FUNCTIONS (copied from optimization) =====
    function openDiagnostic() { const modal = document.getElementById('diagnosticModal'); modal.classList.add('active'); document.body.style.overflow = 'hidden'; runDiagnostics(); }
    function closeDiagnostic() { const modal = document.getElementById('diagnosticModal'); modal.classList.remove('active'); document.body.style.overflow = 'auto'; }
    function closeOnOutsideClick(event) { if (event.target === event.currentTarget) closeDiagnostic(); }
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDiagnostic(); });

    function getOS(){ const ua = navigator.userAgent; if (ua.indexOf('Win')>-1){ if (ua.indexOf('Windows NT 10.0')>-1) return 'Windows 10/11'; if (ua.indexOf('Windows NT 6.3')>-1) return 'Windows 8.1'; if (ua.indexOf('Windows NT 6.2')>-1) return 'Windows 8'; if (ua.indexOf('Windows NT 6.1')>-1) return 'Windows 7'; return 'Windows (Unknown Version)'; } else if (ua.indexOf('Mac')>-1) return 'macOS'; else if (ua.indexOf('Linux')>-1) return 'Linux'; else if (ua.indexOf('Android')>-1) return 'Android'; else if (/iPhone|iPad|iPod/i.test(ua)) return 'iOS'; return 'Unknown OS'; }
    function getBrowser(){ const ua = navigator.userAgent; if (ua.indexOf('Edg')>-1) return 'Microsoft Edge'; if (ua.indexOf('Chrome')>-1 && ua.indexOf('Edg')===-1) return 'Google Chrome'; if (ua.indexOf('Safari')>-1 && ua.indexOf('Chrome')===-1) return 'Safari'; if (ua.indexOf('Firefox')>-1) return 'Mozilla Firefox'; if (ua.indexOf('Opera')>-1 || ua.indexOf('OPR')>-1) return 'Opera'; return 'Unknown Browser'; }
    async function getGPUInfo(){ try{ const canvas=document.createElement('canvas'); const gl=canvas.getContext('webgl')||canvas.getContext('experimental-webgl'); if (!gl) return { renderer: 'WebGL not supported', vendor: 'N/A' }; const info = gl.getExtension('WEBGL_debug_renderer_info'); if (info) { return { renderer: gl.getParameter(info.UNMASKED_RENDERER_WEBGL), vendor: gl.getParameter(info.UNMASKED_VENDOR_WEBGL) }; } return { renderer: 'Unable to detect', vendor: 'N/A' }; } catch(e){ return { renderer: 'Error detecting GPU', vendor: 'N/A' }; } }
    function getCPUCores(){ return navigator.hardwareConcurrency || 'Unknown'; }
    function getRAM(){ return navigator.deviceMemory ? navigator.deviceMemory + ' GB (approximate)' : 'Not available in this browser'; }
    function getScreenInfo(){ return { resolution: `${screen.width} Ã— ${screen.height}`, colorDepth: `${screen.colorDepth}-bit`, pixelRatio: window.devicePixelRatio || 1 }; }
    function getConnectionInfo(){ const c = navigator.connection || navigator.mozConnection || navigator.webkitConnection; return c ? { type: c.effectiveType || 'Unknown', downlink: c.downlink ? c.downlink + ' Mbps' : 'Unknown', rtt: c.rtt ? c.rtt + ' ms' : 'Unknown' } : null; }

    async function runDiagnostics(){ const content = document.getElementById('diagnosticContent'); content.innerHTML = '<div class="loading"><i class="fas fa-sync-alt"></i> Running diagnostics...</div>'; await new Promise(r=>setTimeout(r,800)); const gpuInfo = await getGPUInfo(); const screenInfo = getScreenInfo(); const connectionInfo = getConnectionInfo(); const diagnosticHTML = `
      <div class="diagnostic-section">
        <h3><i class="fas fa-laptop"></i> System Information</h3>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">Operating System</span><span class="info-value">${getOS()}</span></div>
          <div class="info-item"><span class="info-label">Browser</span><span class="info-value">${getBrowser()}</span></div>
          <div class="info-item"><span class="info-label">User Agent</span><span class="info-value" style="word-break: break-all; font-size: 0.75rem;">${navigator.userAgent}</span></div>
        </div>
      </div>
      <div class="diagnostic-section">
        <h3><i class="fas fa-gamepad"></i> Graphics & Display</h3>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">GPU Renderer</span><span class="info-value">${gpuInfo.renderer}</span></div>
          <div class="info-item"><span class="info-label">GPU Vendor</span><span class="info-value">${gpuInfo.vendor}</span></div>
          <div class="info-item"><span class="info-label">Screen Resolution</span><span class="info-value">${screenInfo.resolution}</span></div>
          <div class="info-item"><span class="info-label">Color Depth</span><span class="info-value">${screenInfo.colorDepth}</span></div>
          <div class="info-item"><span class="info-label">Device Pixel Ratio</span><span class="info-value">${screenInfo.pixelRatio}x</span></div>
        </div>
      </div>
      <div class="diagnostic-section">
        <h3><i class="fas fa-sliders-h"></i> Hardware</h3>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">CPU Cores</span><span class="info-value">${getCPUCores()} logical processors</span></div>
          <div class="info-item"><span class="info-label">RAM (Estimated)</span><span class="info-value">${getRAM()}</span></div>
          <div class="info-item"><span class="info-label">Platform</span><span class="info-value">${navigator.platform}</span></div>
        </div>
      </div>
      ${connectionInfo ? `
      <div class="diagnostic-section">
        <h3><i class="fas fa-globe"></i> Network</h3>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">Connection Type</span><span class="info-value">${connectionInfo.type.toUpperCase()}</span></div>
          <div class="info-item"><span class="info-label">Download Speed</span><span class="info-value">${connectionInfo.downlink}</span></div>
          <div class="info-item"><span class="info-label">Latency (RTT)</span><span class="info-value">${connectionInfo.rtt}</span></div>
        </div>
      </div>` : ''}
      <div class="diagnostic-section">
        <h3><i class="fas fa-chart-bar"></i> Browser Capabilities</h3>
        <div class="info-grid">
          <div class="info-item"><span class="info-label">Cookies Enabled</span><span class="status-badge ${navigator.cookieEnabled ? 'status-good' : 'status-warning'}">${navigator.cookieEnabled ? '<i class="fas fa-check"></i> Yes' : '<i class="fas fa-times"></i> No'}</span></div>
          <div class="info-item"><span class="info-label">Online Status</span><span class="status-badge ${navigator.onLine ? 'status-good' : 'status-warning'}">${navigator.onLine ? '<i class="fas fa-check"></i> Online' : '<i class="fas fa-times"></i> Offline'}</span></div>
          <div class="info-item"><span class="info-label">Language</span><span class="info-value">${navigator.language}</span></div>
          <div class="info-item"><span class="info-label">Timezone</span><span class="info-value">${Intl.DateTimeFormat().resolvedOptions().timeZone}</span></div>
        </div>
      </div>
      <button class="refresh-btn" onclick="runDiagnostics()"><i class="fas fa-sync-alt"></i> Refresh Diagnostics</button>
    `; content.innerHTML = diagnosticHTML; calculateHealthScore(gpuInfo, screenInfo, connectionInfo); content.insertAdjacentHTML('afterbegin', `<div class="diagnostic-note"><i class="fas fa-info-circle"></i><span>Chrome is recommended to see all diagnostics</span></div>`); }

    function calculateHealthScore(gpuInfo, screenInfo, connectionInfo){ let score=0; const recommendations=[]; const metrics={}; const ramGB = navigator.deviceMemory || 0; if (ramGB>=16){ score+=20; metrics.ram={value:ramGB+' GB', score:100, status:'excellent'}; } else if (ramGB>=8){ score+=15; metrics.ram={value:ramGB+' GB', score:75, status:'good'}; recommendations.push({text:'Consider upgrading to 16GB RAM for better multitasking'}); } else if (ramGB>=4){ score+=10; metrics.ram={value:ramGB+' GB', score:50, status:'fair'}; recommendations.push({text:'<strong>Upgrade RAM:</strong> 4GB is minimal. Upgrade to 8GB or 16GB for significant improvement'}); } else { score+=5; metrics.ram={value:ramGB+' GB', score:25, status:'poor'}; recommendations.push({text:'<strong>Critical:</strong> RAM is very low. Upgrade to at least 8GB immediately'}); } const cpuCores = navigator.hardwareConcurrency || 0; if (cpuCores>=8){ score+=20; metrics.cpu={value:cpuCores+' cores', score:100, status:'excellent'}; } else if (cpuCores>=4){ score+=15; metrics.cpu={value:cpuCores+' cores', score:75, status:'good'}; } else if (cpuCores>=2){ score+=10; metrics.cpu={value:cpuCores+' cores', score:50, status:'fair'}; recommendations.push({text:'CPU has limited cores. Consider upgrading for better performance'}); } else { score+=5; metrics.cpu={value:cpuCores+' cores', score:25, status:'poor'}; recommendations.push({text:'<strong>Upgrade CPU:</strong> Single/dual-core CPUs are outdated'}); } const rLower = (gpuInfo.renderer||'').toLowerCase(); if (rLower.includes('nvidia') || rLower.includes('amd') || rLower.includes('radeon')){ score+=20; metrics.gpu={value:'Dedicated GPU', score:100, status:'excellent'}; } else if (rLower.includes('intel')) { score+=10; metrics.gpu={value:'Integrated GPU', score:50, status:'fair'}; recommendations.push({text:'<strong>GPU Optimization:</strong> Enable Hardware-Accelerated GPU Scheduling in Display Settings'}); } else { score+=5; metrics.gpu={value:'Basic GPU', score:25, status:'poor'}; recommendations.push({text:'Consider a dedicated GPU for gaming/graphics work'}); } if (connectionInfo){ const downlink=parseFloat(connectionInfo.downlink)||0; if (downlink>=10){ score+=15; metrics.connection={value:downlink+' Mbps', score:100, status:'excellent'}; } else if (downlink>=5){ score+=10; metrics.connection={value:downlink+' Mbps', score:67, status:'good'}; } else if (downlink>=1){ score+=5; metrics.connection={value:downlink+' Mbps', score:33, status:'fair'}; recommendations.push({text:'Slow internet detected. Check Network & DNS Optimization section'}); } else { score+=2; metrics.connection={value:'Poor', score:13, status:'poor'}; recommendations.push({text:'<strong>Network Issues:</strong> Very slow connection. Contact your ISP'}); } } else { score+=10; metrics.connection={value:'Unknown', score:67, status:'good'}; } const pixels = screen.width*screen.height; if (pixels>=3840*2160){ score+=15; metrics.display={value:'4K+', score:100, status:'excellent'}; } else if (pixels>=1920*1080){ score+=12; metrics.display={value:'1080p+', score:80, status:'good'}; } else if (pixels>=1280*720){ score+=8; metrics.display={value:'720p+', score:53, status:'fair'}; } else { score+=4; metrics.display={value:'Low Res', score:27, status:'poor'}; } const os=getOS(); if (os.includes('Windows 10') || os.includes('Windows 11')){ score+=10; recommendations.push({text:'Apply Windows tweaks from BIOS and Performance sections'}); } else if (os.includes('Windows')){ score+=5; recommendations.push({text:'<strong>Upgrade OS:</strong> Consider upgrading to Windows 10/11'}); } else if (os.includes('Linux') || os.includes('macOS')){ score+=10; } else { score+=5; } if (score>=80){ recommendations.unshift({text:'ðŸŽ‰ Your system is in great shape! Focus on software optimizations'}); } else if (score>=60){ recommendations.unshift({text:'Your system is decent. Apply the tweaks in this guide for better performance'}); } else if (score>=40){ recommendations.unshift({text:'Your system needs attention. Start with Essential tweaks and consider hardware upgrades'}); } else { recommendations.unshift({text:'<i class="fas fa-exclamation-triangle"></i> Your system needs significant upgrades. Focus on RAM and CPU first'}); } displayHealthScore(score, metrics, recommendations); }

    function displayHealthScore(score, metrics, recommendations){ const content=document.getElementById('diagnosticContent'); let scoreStatus='poor', scoreLabel='Needs Work'; if (score>=80){ scoreStatus='excellent'; scoreLabel='Excellent'; } else if (score>=60){ scoreStatus='good'; scoreLabel='Good'; } else if (score>=40){ scoreStatus='fair'; scoreLabel='Fair'; } const C=2*Math.PI*65; const off=C-(score/100)*C; const healthHTML = `
      <div class="health-score-container">
        <div class="health-score-header"><h3><i class="fas fa-pills"></i> System Health Score</h3></div>
        <div class="score-display">
          <div class="score-circle">
            <svg width="150" height="150">
              <circle class="score-circle-bg" cx="75" cy="75" r="65"></circle>
              <circle class="score-circle-progress ${scoreStatus}" cx="75" cy="75" r="65" stroke-dasharray="${C}" stroke-dashoffset="${off}"></circle>
            </svg>
            <div class="score-value">${Math.round(score)}</div>
          </div>
          <div class="score-label">${scoreLabel}</div>
        </div>
        <div class="health-metrics">
          ${Object.entries(metrics).map(([k,d]) => `<div class="metric-card"><h5>${k.toUpperCase()}</h5><div class="metric-value">${d.value}</div><div class="metric-bar"><div class="metric-bar-fill ${d.status}" style="width:${d.score}%"></div></div></div>`).join('')}
        </div>
        <div class="health-recommendations">
          <h4><i class="fas fa-clipboard-list"></i> Recommendations</h4>
          ${recommendations.map(r => `<div class="recommendation-item">${r.text}</div>`).join('')}
        </div>
      </div>`; content.insertAdjacentHTML('afterbegin', healthHTML); }

    // ===== CONTINUOUS PERFORMANCE MONITOR (copied from optimization) =====
    let performanceChart = null; let perfMonitorActive = false; let perfMonitorInterval = null; let perfSamples = { memory: [], render: [], storage: [] };
    function togglePerformanceMonitor(){
      // Start monitoring and open the modal UI (same behavior as optimization)
      if (perfMonitorActive) { stopPerformanceMonitor(); openPerformanceModal(); }
      else { startPerformanceMonitor(); setTimeout(openPerformanceModal, 300); }
    }
    function startPerformanceMonitor(){ perfMonitorActive = true; perfSamples = { memory: [], render: [], storage: [] }; perfMonitorInterval = setInterval(async () => { const m=await testMemoryPerformance(); const r=await testRenderPerformance(); const s=await testStoragePerformance(); perfSamples.memory.push(m); perfSamples.render.push(r); perfSamples.storage.push(s); if (perfSamples.memory.length>5){ perfSamples.memory.shift(); perfSamples.render.shift(); perfSamples.storage.shift(); } updatePerformanceDisplay(); }, 1000); }
    function stopPerformanceMonitor(){ perfMonitorActive=false; if(perfMonitorInterval){ clearInterval(perfMonitorInterval); perfMonitorInterval=null; } if(perfSamples.memory.length>0){ const results={ memoryTest:Math.round(average(perfSamples.memory)), renderTest:Math.round(average(perfSamples.render)), storageTest:Math.round(average(perfSamples.storage)), timestamp:Date.now() }; const prevData=localStorage.getItem('perfTestResults'); if(prevData){ const prev=JSON.parse(prevData); results.previous={memoryTest:prev.memoryTest,renderTest:prev.renderTest,storageTest:prev.storageTest}; if(prev.previous){ results.older={memoryTest:prev.previous.memoryTest,renderTest:prev.previous.renderTest,storageTest:prev.previous.storageTest}; } } localStorage.setItem('perfTestResults',JSON.stringify(results)); } }
    function average(arr){ return arr.reduce((a,b)=>a+b,0)/arr.length; }
    function openPerformanceModal(){ const modal=document.getElementById('diagnosticModal'); modal.classList.add('active'); document.body.style.overflow='hidden'; const content=document.getElementById('diagnosticContent'); content.innerHTML = `
        <div class="perf-test-container" style="border:none; padding:0;">
          <div class="perf-test-header">
            <h3><i class="fas fa-bolt"></i> Live Performance Monitor</h3>
            <div style="display:flex; gap:8px;">
              <button class="perf-test-btn" onclick="stopAndSavePerformance()" style="background:#ef4444;">Save</button>
            </div>
          </div>
          <div id="perfTestResults">
            <div class="perf-status"><i class="fas fa-bolt"></i> Monitoring performance... Collecting data for 5-second average</div>
          </div>
        </div>`; updatePerformanceDisplay(); }
    function stopAndSavePerformance(){ stopPerformanceMonitor(); }
    function updatePerformanceDisplay(){
      const container=document.getElementById('perfTestResults'); if(!container||perfSamples.memory.length===0) return;
      const current={memoryTest:Math.round(average(perfSamples.memory)),renderTest:Math.round(average(perfSamples.render)),storageTest:Math.round(average(perfSamples.storage))};
      const prevData=localStorage.getItem('perfTestResults'); const previous=prevData?JSON.parse(prevData):null;
      const older=previous&&previous.older?previous.older:null;
      const count=perfSamples.memory.length; const statusText=count<5?`Collecting samples... (${count}/5)`:`5-second rolling average (${count} samples)`;
      const isFirst=!container.querySelector('.perf-results');
      if(isFirst){
        let html=`<div class="perf-status" id="perfStatus" style="background:rgba(74,222,128,0.1);color:#4ade80;border:1px solid #4ade80;border-radius:6px;margin-bottom:16px;">${statusText}</div><div class="perf-results">`;
        html+=createPerfCard('Memory Operations',current.memoryTest,previous?previous.memoryTest:null,older?older.memoryTest:null,'ms',true);
        html+=createPerfCard('DOM Rendering',current.renderTest,previous?previous.renderTest:null,older?older.renderTest:null,'ms',true);
        html+=createPerfCard('Storage I/O',current.storageTest,previous?previous.storageTest:null,older?older.storageTest:null,'ms',true);
        html+='</div><div class="perf-chart-container"><canvas id="perfChart"></canvas></div>';
        container.innerHTML=html;
        createPerformanceChart({...current,previous,older});
      } else {
        const statusEl=document.getElementById('perfStatus'); if(statusEl) statusEl.textContent=statusText;
        const cards=container.querySelectorAll('.perf-result-card');
        const metrics=[{value:current.memoryTest,prev:previous?previous.memoryTest:null},{value:current.renderTest,prev:previous?previous.renderTest:null},{value:current.storageTest,prev:previous?previous.storageTest:null}];
        cards.forEach((card,i)=>{ if(i<metrics.length){ const m=metrics[i]; const el=card.querySelector('.perf-comparison:first-of-type .perf-value'); if(el) el.textContent=m.value+'ms'; const imp=card.querySelector('.perf-improvement'); if(imp&&m.prev!==null){ const diff=m.value-m.prev; const pct=((diff/m.prev)*100).toFixed(1); const improved=diff<0; const sign=diff>0?'+':''; imp.className=`perf-improvement ${improved?'positive':'negative'}`; imp.innerHTML=`${improved?'<i class="fas fa-arrow-up"></i>':'<i class="fas fa-arrow-down"></i>'} ${sign}${pct}% ${improved?'Better':'Worse'}`; } } });
        if(performanceChart){ performanceChart.data.datasets[performanceChart.data.datasets.length-1].data=[current.memoryTest,current.renderTest,current.storageTest]; performanceChart.update('none'); }
      }
    }
    async function testMemoryPerformance(){ const start=performance.now(); const arrays=[]; for(let i=0;i<1000;i++) arrays.push(new Array(1000).fill(Math.random())); let sum=0; for(let a of arrays) sum+=a[0]; const end=performance.now(); return Math.round(end-start); }
    async function testRenderPerformance(){ const start=performance.now(); const testDiv=document.createElement('div'); testDiv.style.position='absolute'; testDiv.style.left='-9999px'; document.body.appendChild(testDiv); for(let i=0;i<500;i++){ const el=document.createElement('div'); el.textContent='Test '+i; el.style.padding='10px'; testDiv.appendChild(el); } testDiv.offsetHeight; document.body.removeChild(testDiv); const end=performance.now(); return Math.round(end-start); }
    async function testStoragePerformance(){ const start=performance.now(); for(let i=0;i<100;i++) localStorage.setItem('perf_test_'+i,'x'.repeat(100)); for(let i=0;i<100;i++) localStorage.getItem('perf_test_'+i); for(let i=0;i<100;i++) localStorage.removeItem('perf_test_'+i); const end=performance.now(); return Math.round(end-start); }
    function createPerfCard(title,current,previous,older,unit,lowerIsBetter){ let improvHTML=''; if(previous!==null&&previous!==undefined){ const diff=current-previous; const pct=((diff/previous)*100).toFixed(1); const improved=lowerIsBetter?diff<0:diff>0; const sign=diff>0?'+':''; improvHTML=`<div class="perf-improvement ${improved?'positive':'negative'}">${improved?'<i class="fas fa-arrow-up"></i>':'<i class="fas fa-arrow-down"></i>'} ${sign}${pct}% ${improved?'Better':'Worse'}</div>`; } const prevRow=previous!==null&&previous!==undefined?`<div class="perf-comparison"><span class="perf-label">Previous:</span><span class="perf-value">${previous}${unit}</span></div>`:''; const olderRow=older!==null&&older!==undefined?`<div class="perf-comparison"><span class="perf-label">Older:</span><span class="perf-value">${older}${unit}</span></div>`:''; return `<div class="perf-result-card"><h4>${title}</h4><div class="perf-comparison"><span class="perf-label">Current:</span><span class="perf-value">${current}${unit}</span></div>${prevRow}${olderRow}${improvHTML}</div>`; }
    function createPerformanceChart(results){
      const ctx=document.getElementById('perfChart'); if(!ctx) return;
      if(performanceChart) performanceChart.destroy();
      const datasets=[];
      if(results.older) datasets.push({label:'Older (ms)',data:[results.older.memoryTest,results.older.renderTest,results.older.storageTest],backgroundColor:'rgba(100,116,139,0.5)',borderColor:'rgba(100,116,139,1)',borderWidth:1});
      if(results.previous) datasets.push({label:'Previous (ms)',data:[results.previous.memoryTest,results.previous.renderTest,results.previous.storageTest],backgroundColor:'rgba(156,163,175,0.5)',borderColor:'rgba(156,163,175,1)',borderWidth:1});
      datasets.push({label:'Current (ms)',data:[results.memoryTest,results.renderTest,results.storageTest],backgroundColor:'rgba(74,222,128,0.5)',borderColor:'rgba(74,222,128,1)',borderWidth:1});
      const barPct=datasets.length>=3?0.6:0.8;
      datasets.forEach(d=>{d.barPercentage=barPct; d.categoryPercentage=0.85;});
      performanceChart=new Chart(ctx,{type:'bar',data:{labels:['Memory Ops','DOM Rendering','Storage I/O'],datasets},options:{responsive:true,maintainAspectRatio:true,plugins:{title:{display:true,text:'Performance Comparison (Lower is Better)',color:'#e5e7eb'},legend:{labels:{color:'#e5e7eb'}}},scales:{y:{beginAtZero:true,ticks:{color:'#9ca3af'},grid:{color:'#333'}},x:{ticks:{color:'#9ca3af'},grid:{color:'#333'}}}}});
    }
  </script>
</body>
</html>